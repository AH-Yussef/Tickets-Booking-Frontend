{"remainingRequest":"/Users/alihassan/Desktop/Tickets-Booking-Frontend/tikcets-booking-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/alihassan/Desktop/Tickets-Booking-Frontend/tikcets-booking-frontend/src/views/CustomerLogin.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/alihassan/Desktop/Tickets-Booking-Frontend/tikcets-booking-frontend/src/views/CustomerLogin.vue","mtime":1644360831282},{"path":"/Users/alihassan/Desktop/Tickets-Booking-Frontend/tikcets-booking-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/alihassan/Desktop/Tickets-Booking-Frontend/tikcets-booking-frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/alihassan/Desktop/Tickets-Booking-Frontend/tikcets-booking-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/alihassan/Desktop/Tickets-Booking-Frontend/tikcets-booking-frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CgpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGZvcm1EYXRhOiB7CiAgICAgICAgZW1haWw6ICIiLAogICAgICAgIHBhc3N3b3JkOiAiIiwKICAgICAgfSwKICAgICAgcnVsZXM6IHsKICAgICAgICBlbWFpbDogWwogICAgICAgICAgewogICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgICAgbWVzc2FnZTogIlBsZWFzZSBmaWxsIGluIHRoZSBlbWFpbCIsCiAgICAgICAgICAgIHRyaWdnZXI6ICJibHVyIiwKICAgICAgICAgIH0sCiAgICAgICAgXSwKICAgICAgICBwYXNzd29yZDogWwogICAgICAgICAgewogICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgICAgbWVzc2FnZTogIlBsZWFzZSBmaWxsIGluIHRoZSBwYXNzd29yZC4iLAogICAgICAgICAgICB0cmlnZ2VyOiAiYmx1ciIsCiAgICAgICAgICB9LAogICAgICAgIF0sCiAgICAgIH0sCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgaGFuZGxlU3VibWl0KCkgewogICAgICB0aGlzLiRyZWZzWyJjdXN0b21lci1sb2dpbi1mb3JtIl0udmFsaWRhdGUoKHZhbGlkKSA9PiB7CiAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICBheGlvcyh7CiAgICAgICAgICAgIG1ldGhvZDogInBvc3QiLAogICAgICAgICAgICB1cmw6ICJodHRwOi8vbG9jYWxob3N0Ojg4ODgvYXBpL3YxL0N1c3RvbWVyL0F1dGhVc2VyIiwKICAgICAgICAgICAgZGF0YTogewogICAgICAgICAgICAgIGVtYWlsOiB0aGlzLmZvcm1EYXRhLmVtYWlsLAogICAgICAgICAgICAgIHBhc3N3b3JkOiB0aGlzLmZvcm1EYXRhLnBhc3N3b3JkLAogICAgICAgICAgICB9LAogICAgICAgICAgfSkKICAgICAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICAgICAgY29uc3QgdG9rZW4gPSByZXNwb25zZS5kYXRhLm1vZGVsLnRva2VuOwogICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJ0b2tlbl9jdXN0b21lciIsIHRva2VuKTsKICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgiY3VzdG9tZXJfaWQiLCB0aGlzLmZvcm1EYXRhLmVtYWlsKTsKICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgiLyIpOwogICAgICAgICAgICAgIHRoaXMuaGFuZGxlUmVzZXQoKTsKICAgICAgICAgICAgfSkKICAgICAgICAgICAgLmNhdGNoKCgpID0+IHsKICAgICAgICAgICAgICB0aGlzLiRNZXNzYWdlLmVycm9yKHsKICAgICAgICAgICAgICAgIGNvbnRlbnQ6CiAgICAgICAgICAgICAgICAgICJFbWFpbCBvciBQYXNzd29yZCBpcyB3cm9uZyIsCiAgICAgICAgICAgICAgICBkdXJhdGlvbjogMjAsCiAgICAgICAgICAgICAgICBjbG9zYWJsZTogdHJ1ZSwKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlUmVzZXQoKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuJE1lc3NhZ2UuZXJyb3IoIlBsZWFzZSBFbnRlciBhbGwgZmllbGRzISIpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgaGFuZGxlUmVzZXQoKSB7CiAgICAgIHRoaXMuJHJlZnNbImN1c3RvbWVyLWxvZ2luLWZvcm0iXS5yZXNldEZpZWxkcygpOwogICAgfSwKICB9LAp9Owo="},{"version":3,"sources":["CustomerLogin.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgCA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CustomerLogin.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"login\">\n    <div class=\"title\">Welcome back !</div>\n    <Form ref=\"customer-login-form\" :model=\"formData\" :rules=\"rules\" class=\"form\">\n      <FormItem prop=\"email\">\n        <Input type=\"text\" v-model=\"formData.email\" placeholder=\"Email\">\n          <Icon type=\"ios-person-outline\" slot=\"prepend\"></Icon>\n        </Input>\n      </FormItem>\n      <FormItem prop=\"password\">\n        <Input\n          type=\"password\"\n          v-model=\"formData.password\"\n          placeholder=\"Password\"\n        >\n          <Icon type=\"ios-lock-outline\" slot=\"prepend\"></Icon>\n        </Input>\n      </FormItem>\n      <FormItem align=\"center\">\n        <Button type=\"primary\" @click=\"handleSubmit()\"> Sign in </Button>\n      </FormItem>\n      <FormItem align=\"center\">\n        <div class=\"sign-up\">\n          <span style=\"margin-right: 0.3rem\">don't have an account?</span>\n          <router-link to=\"/customer-signup\">Sign up</router-link>\n        </div>\n      </FormItem>\n    </Form>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\n\nexport default {\n  data() {\n    return {\n      formData: {\n        email: \"\",\n        password: \"\",\n      },\n      rules: {\n        email: [\n          {\n            required: true,\n            message: \"Please fill in the email\",\n            trigger: \"blur\",\n          },\n        ],\n        password: [\n          {\n            required: true,\n            message: \"Please fill in the password.\",\n            trigger: \"blur\",\n          },\n        ],\n      },\n    };\n  },\n  methods: {\n    handleSubmit() {\n      this.$refs[\"customer-login-form\"].validate((valid) => {\n        if (valid) {\n          axios({\n            method: \"post\",\n            url: \"http://localhost:8888/api/v1/Customer/AuthUser\",\n            data: {\n              email: this.formData.email,\n              password: this.formData.password,\n            },\n          })\n            .then((response) => {\n              const token = response.data.model.token;\n              localStorage.setItem(\"token_customer\", token);\n              localStorage.setItem(\"customer_id\", this.formData.email);\n              this.$router.push(\"/\");\n              this.handleReset();\n            })\n            .catch(() => {\n              this.$Message.error({\n                content:\n                  \"Email or Password is wrong\",\n                duration: 20,\n                closable: true,\n              });\n                this.handleReset();\n            });\n        } else {\n          this.$Message.error(\"Please Enter all fields!\");\n        }\n      });\n    },\n    handleReset() {\n      this.$refs[\"customer-login-form\"].resetFields();\n    },\n  },\n};\n</script>\n\n<style scoped>\n.login {\n  height: 100vh;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n}\n.title {\n  margin-bottom: 1.5rem;\n  font-size: x-large;\n  font-weight: bold;\n}\n.form {\n  width: 33%;\n}\n.sign-up {\n  font-size: 0.85rem;\n}\n</style>\n"]}]}